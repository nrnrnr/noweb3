<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1 (Feb 5, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>Incompatibilities with version 1.1</TITLE>
</HEAD>
<BODY LANG="EN">
 <HR>
<B> Next:</B> <A HREF="node47.html">Index</A>
<B>Up:</B> <A HREF="node42.html">Incompatibilities with Previous Versions</A>
<B> Previous:</B> <A HREF="node45.html">Incompatibilities with version 2.1</A>
<HR>
<A NAME="979"></A><H2><A NAME="S1140">Incompatibilities with version 1.1</A></H2>
<P>
<UL><LI>
The equality test operator now is denoted by <TT><B>==</B></TT>,
instead of <TT><B>=</B></TT>.<LI>
The syntax for table construction has been greatly simplified.
The old <TT><B>@(size)</B></TT> has been substituted by <TT><B>{}</B></TT>.
The list constructor (formerly <TT><B>@[...]</B></TT>) and the record
constructor (formerly <TT><B>@{...}</B></TT>) now are both coded like
<TT><B>{...}</B></TT>.
When the construction involves a function call,
like in <TT><B>@func{...}</B></TT>,
the new syntax does not use the <TT><B>@</B></TT>.
More important, <I>a construction function must now
explicitly return the constructed table</I>.<LI>
The function <TT><B>lua_call</B></TT> no longer has the parameter <TT><B>nparam</B></TT>.<LI>
The function <TT><B>lua_pop</B></TT> is no longer available,
since it could lead to strange behavior.
In particular,
to access results returned from a Lua function,
the new macro <TT><B>lua_getresult</B></TT> should be used.<LI>
The old functions <TT><B>lua_storefield</B></TT> and <TT><B>lua_storeindexed</B></TT>
have been replaced by
<B><PRE>int lua_storesubscript (void);</PRE></B>
with the parameters explicitly pushed on the stack.<LI>
The functionality of the function <TT><B>lua_errorfunction</B></TT> has been
replaced by the <I>fallback</I> mechanism (see Section&nbsp;<A HREF="node12.html#error">4.8</A>).<LI>
When calling a function from the Lua library,
parameters passed through the stack
must be pushed just before the corresponding call,
with no intermediate calls to Lua.
Special care should be taken with macros like
<TT><B>lua_getindexed</B></TT> and <TT><B>lua_getfield</B></TT>.
</UL><HR>
<B> Next:</B> <A HREF="node47.html">Index</A>
<B>Up:</B> <A HREF="node42.html">Incompatibilities with Previous Versions</A>
<B> Previous:</B> <A HREF="node45.html">Incompatibilities with version 2.1</A>
<HR>
</BODY>
