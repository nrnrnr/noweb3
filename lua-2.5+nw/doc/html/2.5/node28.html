<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1 (Feb 5, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>7.3 Hooks</TITLE>
</HEAD>
<BODY LANG="EN">
 <HR>
<B> Next:</B> <A HREF="node29.html">8 Some Examples</A>
<B>Up:</B> <A HREF="node25.html">7 The Debugger Interface</A>
<B> Previous:</B> <A HREF="node27.html">7.2 Manipulating Local Variables</A>
<HR>
<H2><A NAME="S730">7.3 Hooks</A></H2>
<P>
The Lua interpreter offers two hooks for debugging purposes:
<B><PRE>typedef void (*lua_CHFunction) (lua_Function func, char *file, int line);
extern lua_CHFunction lua_callhook;

typedef void (*lua_LHFunction) (int line);
extern lua_LHFunction lua_linehook;</PRE></B>
The first one is called whenever the interpreter enters or leaves a
function.
When entering a function,
its parameters are a handle to the function activation record,
plus the file and the line where the function is defined (the same
information which is provided by <TT><B>lua_funcinfo</B></TT>);
when leaving a function, <TT><B>func</B></TT> is <TT><B>LUA_NOOBJECT</B></TT>,
<TT><B>file</B></TT> is <TT><B>"(return)"</B></TT>, and <TT><B>line</B></TT> is 0.
<P>
The other hook is called every time the interpreter changes
the line of code it is executing.
Its only parameter is the line number
(the same information which is provided by the call
<TT><B>lua_currentline(lua_stackedfunction(0))</B></TT>).
This second hook is only called if the active function
has been pre-compiled with debug information (see Section&nbsp;<A HREF="node12.html#pragma">4.8</A>).
<P>
A hook is disabled when its value is NULL (0),
which is the initial value of both hooks.
<P>
<HR>
<B> Next:</B> <A HREF="node29.html">8 Some Examples</A>
<B>Up:</B> <A HREF="node25.html">7 The Debugger Interface</A>
<B> Previous:</B> <A HREF="node27.html">7.2 Manipulating Local Variables</A>
<HR>
</BODY>
